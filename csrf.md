# CSRF

<br /><br />

1. CSRF 공격
```
CSRF(Cross-Site Request Forgery)는 웹 보안 공격의 한 형태로,
사용자가 인증된 상태에서 악의적인 요청을 서버에 보내는 공격이다.
공격자는 사용자가 이미 인증된 상태인 웹 사이트에 대해 악용하고,
사용자의 권한으로 서버에 요청을 보내는 것이다.
```

<br />

2. 공격 예시
```
만일, A라는 사이트의 사용자 개인 비밀번호 변경을 하는 주소 패턴이
'http://example.com/user.do?cmd=user_passwd_change&user=admin&newPwd=1234'라고 한다면,
이러한 링크를 사용자의 메일로 보내는데,
만약 사용자가 메일을 읽게 되면 해당 사용자의 패스워드가 1234로 초기화된다.
이를 관리자에게 보내서 일반 계정을 관리자 계정으로 바꾸도록 하거나,
관리자 계정 패스워드를 바꾸는데 이용한다면 해당 사이트의 모든 정보가 해킹당하는 데는 오랜 시간이 걸리지 않는다.

참고로, img 태그도 GET 메소드를 사용해서 보내는 것이기 때문에 img를 이용할 수도 있다.
대부분의 사이트는 img를 필터링하지 않으므로, 혹은 필터링하지 못하므로 유용한 방법이 될 수 있다.
```

<br />

3. 예방 방법
```
- CSRF 토큰 사용
사용자의 세션에 CSRF 토큰을 포함하여 모든 중요한 요청에 함께 전송한다.
서버는 요청이 유효한지 확인하기 위해 이 토큰을 검증한다.
```

```
- SameSite 쿠키 설정
쿠키에 SameSite 속성을 설정하여 동일 출처 정책을 강화하고 CSRF 공격의 영향을 줄일 수 있다.
```

```
- Origin 검증
서버는 요청의 Referer 헤더나 Origin 헤더를 확인하여 요청이 예상한 출처에서 온 것인지 확인할 수 있다.
```
